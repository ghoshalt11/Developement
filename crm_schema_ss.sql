create or replace TABLE CRM_SAMPLE_DB.PUBLIC.DEALS (
	DEAL_ID VARCHAR(16777216) NOT NULL,
	LEAD_ID VARCHAR(16777216),
	OPPORTUNITY_NAME VARCHAR(16777216),
	AMOUNT FLOAT,
	STAGE VARCHAR(16777216),
	PROBABILITY FLOAT,
	TYPE VARCHAR(16777216),
	CLOSE_DATE DATE,
	FORECAST_CATEGORY VARCHAR(16777216),
	OWNER_ID VARCHAR(16777216),
	CREATED_DATE TIMESTAMP_NTZ(9),
	LAST_MODIFIED_DATE TIMESTAMP_NTZ(9),
	primary key (DEAL_ID)
);

create or replace TABLE CRM_SAMPLE_DB.PUBLIC.INTERACTION_HISTORY (
	INTERACTION_ID VARCHAR(16777216) NOT NULL,
	LEAD_ID VARCHAR(16777216),
	CONTACT_ID VARCHAR(16777216),
	REP_ID VARCHAR(16777216),
	INTERACTION_TYPE VARCHAR(16777216),
	INTERACTION_CHANNEL VARCHAR(16777216),
	SUBJECT VARCHAR(16777216),
	CONTENT VARCHAR(16777216),
	OUTCOME VARCHAR(16777216),
	DIRECTION VARCHAR(16777216),
	DURATION_MINUTES FLOAT,
	FOLLOW_UP_REQUIRED BOOLEAN,
	RELATED_DEAL_ID VARCHAR(16777216),
	CREATED_DATE TIMESTAMP_NTZ(9),
	LAST_MODIFIED_DATE TIMESTAMP_NTZ(9),
	SOURCE_SYSTEM VARCHAR(16777216),
	SOURCE_OBJECT_TYPE VARCHAR(16777216),
	primary key (INTERACTION_ID)
);

create or replace TABLE CRM_SAMPLE_DB.PUBLIC.LEADS (
	LEAD_ID VARCHAR(16777216) NOT NULL,
	FIRST_NAME VARCHAR(16777216),
	LAST_NAME VARCHAR(16777216),
	COMPANY VARCHAR(16777216),
	EMAIL VARCHAR(16777216),
	PHONE VARCHAR(16777216),
	TITLE VARCHAR(16777216),
	STATUS VARCHAR(16777216),
	LEAD_SOURCE VARCHAR(16777216),
	INDUSTRY VARCHAR(16777216),
	RATING VARCHAR(16777216),
	ANNUAL_REVENUE NUMBER(18,2),
	NUMBER_OF_EMPLOYEES NUMBER(10,0),
	ADDRESS VARCHAR(16777216),
	CITY VARCHAR(16777216),
	STATE VARCHAR(16777216),
	POSTAL_CODE VARCHAR(16777216),
	COUNTRY VARCHAR(16777216),
	OWNER_ID VARCHAR(16777216),
	CREATED_DATE TIMESTAMP_NTZ(9),
	LAST_MODIFIED_DATE TIMESTAMP_NTZ(9),
	LAST_INTERACTION_DATE TIMESTAMP_NTZ(9),
	primary key (LEAD_ID)
);

create or replace TABLE CRM_SAMPLE_DB.PUBLIC.NOTES (
	NOTE_ID VARCHAR(16777216) NOT NULL,
	PARENT_TYPE VARCHAR(16777216),
	PARENT_ID VARCHAR(16777216),
	TITLE VARCHAR(16777216),
	BODY VARCHAR(16777216),
	IS_PRIVATE BOOLEAN,
	CREATED_BY_ID VARCHAR(16777216),
	CREATED_DATE TIMESTAMP_NTZ(9),
	LAST_MODIFIED_DATE TIMESTAMP_NTZ(9),
	SOURCE_SYSTEM VARCHAR(16777216) DEFAULT 'Salesforce',
	primary key (NOTE_ID)
);

create or replace TABLE CRM_SAMPLE_DB.PUBLIC.TASKS (
	TASK_ID VARCHAR(16777216) NOT NULL,
	SUBJECT VARCHAR(16777216),
	STATUS VARCHAR(16777216),
	PRIORITY VARCHAR(16777216),
	ACTIVITY_DATE DATE,
	DESCRIPTION VARCHAR(16777216),
	OWNER_ID VARCHAR(16777216),
	WHO_ID VARCHAR(16777216),
	WHAT_ID VARCHAR(16777216),
	IS_REMINDER_SET BOOLEAN,
	REMINDER_DATETIME TIMESTAMP_NTZ(9),
	IS_TASK BOOLEAN,
	CALL_TYPE VARCHAR(16777216),
	CALL_DURATION_SECONDS NUMBER(38,0),
	CREATED_DATE TIMESTAMP_NTZ(9),
	LAST_MODIFIED_DATE TIMESTAMP_NTZ(9),
	SOURCE_SYSTEM VARCHAR(16777216) DEFAULT 'Salesforce',
	primary key (TASK_ID)
);

-- Adding Foreign Key Constraints
ALTER TABLE deals
ADD CONSTRAINT fk_deals_leads FOREIGN KEY (lead_id) REFERENCES leads(lead_id);
ALTER TABLE interaction_history
ADD CONSTRAINT fk_interaction_leads FOREIGN KEY (lead_id) REFERENCES leads(lead_id);
ALTER TABLE interaction_history
ADD CONSTRAINT fk_interaction_deals FOREIGN KEY (related_deal_id) REFERENCES deals(deal_id);
ALTER TABLE tasks
ADD CONSTRAINT fk_tasks_leads FOREIGN KEY (lead_id) REFERENCES leads(lead_id);
ALTER TABLE notes
ADD CONSTRAINT fk_notes_leads FOREIGN KEY (lead_id) REFERENCES leads(lead_id);
